(function(e){function t(t){for(var n,o,c=t[0],i=t[1],u=t[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,c=1;c<r.length;c++){var i=r[c];0!==a[i]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0924":function(e,t,r){},"0a85":function(e,t,r){},1:function(e,t){},"19f2":function(e,t,r){"use strict";r("99c2")},"282d":function(e,t,r){"use strict";r("9aa7")},3112:function(e,t,r){},"379d":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("99af"),r("4de4");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-screen h-screen",attrs:{id:"app"}},[r("d-context-menu"),r("MainWrapper",[r("router-view")],1),r("DModal")],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col w-full h-full px-6"},[r("header",{staticClass:"flex flex-row items-center p-4"},[r("router-link",{staticStyle:{display:"contents"},attrs:{to:"/"}},[r("img",{staticClass:"h-full",attrs:{src:"https://i.imgur.com/HawjmLR.png",alt:"Leap Logo"}})]),r("div",{staticClass:"flex-grow"}),r("d-input",{attrs:{type:"text",value:"",placeholder:"search"}}),r("router-link",{staticClass:"flex items-center justify-center bg-black rounded-full p-2 ml-3",attrs:{to:"/"}},[r("span",{staticClass:"material-icons text-white"},[e._v(" home ")])]),r("router-link",{staticClass:"flex items-center justify-center bg-black rounded-full p-2 ml-3",attrs:{to:"/"}},[r("span",{staticClass:"material-icons text-white"},[e._v(" videocam ")])]),r("router-link",{staticClass:"flex items-center justify-center bg-black rounded-full p-2 ml-3",attrs:{to:"/"}},[r("span",{staticClass:"material-icons text-white"},[e._v(" account_circle ")])])],1),r("main",{staticClass:"flex-grow"},[e._t("default")],2)])},c=[],i={},u=i,l=(r("9ae6"),r("2877")),d=Object(l["a"])(u,o,c,!1,null,"95f07e4e",null),m=d.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.state.nav.modal?r("div",{ref:"modal",staticClass:"modal flex items-center justify-center"},[r("div",{staticClass:"modal__box-container w-full",staticStyle:{"max-width":"600px"}},[r("div",{staticClass:"modal__box bg-dark-5 shadow-reg scrollbar overflow-auto text-gray-300"},[e.$store.state.nav.modalData.noclose?e._e():r("button",{staticClass:"btn btn-close",on:{click:e.close}},[r("i",{staticClass:"material-icons"},[e._v("close")])]),"join-room"===e.$store.state.nav.modal?r("section",[r("JoinRoom")],1):e._e(),"add-video-player"===e.$store.state.nav.modal?r("section",[r("AddVideoPlayer")],1):"add-video-to-player"===e.$store.state.nav.modal?r("section",[r("AddVideoToPlayer")],1):"change-username"===e.$store.state.nav.modal?r("section",[r("ChangeUsername")],1):e._e()])]),r("div",{staticClass:"modal__bg",on:{click:e.close}})]):e._e()},f=[],h=r("1da1"),v=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-2xl text-grey-400 mb-2"},[e._v("Join Room")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("d-input",{staticClass:"flex-grow mr-2 mb-4",attrs:{label:"Enter your name",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("d-btn",{staticClass:"p-btn inline-block rounded font-bold bg-dark-2 px-3 py-2",attrs:{type:"submit",variant:"none"}},[e._v("Join Room")])],1)])}),b=[],x={data:function(){return{username:""}},methods:{onSubmit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.username){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$store.dispatch("room/join",{roomId:e.$route.params.roomId,username:e.username});case 4:if(r=t.sent,r){t.next=8;break}return e.answer="",t.abrupt("return");case 8:e.$store.dispatch("nav/hideModal");case 9:case"end":return t.stop()}}),t)})))()}}},_=x,g=Object(l["a"])(_,v,b,!1,null,null,null),y=g.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-2xl text-grey-400 mb-2"},[e._v("Add Syncronized Video Player")]),r("form",{staticClass:"flex",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("d-input",{staticClass:"flex-grow mr-2",attrs:{placeholder:"Enter a YouTube, Twitch, or .mp4 video URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),r("d-btn",{staticClass:"h-full",attrs:{variant:"primary",type:"submit"}},[e._v("Add")])],1)])},C=[],k={data:function(){return{url:""}},methods:{onSubmit:function(){this.$store.dispatch("room/addVideoPlayer",this.url),this.$store.dispatch("nav/hideModal")}}},E=k,S=Object(l["a"])(E,w,C,!1,null,null,null),O=S.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-2xl text-grey-400 mb-2"},[e._v("Player Queue")]),r("form",{staticClass:"flex mb-4",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("d-input",{staticClass:"flex-grow mr-2",attrs:{placeholder:"Add a YouTube, Twitch, or .mp4 video URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),r("d-btn",{staticClass:"h-full",attrs:{variant:"primary",type:"submit"}},[e._v("Add")])],1),r("ul",{staticClass:"queue list-style-none overflow-y-auto"},e._l(e.queue,(function(t,n){return r("li",{key:n,staticClass:"flex items-center mb-1 rounded p-1"},[r("div",{staticClass:"flex flex-grow"},[r("div",{staticClass:"relative flex-shrink-0 mr-2 rounded",staticStyle:{"max-width":"12rem"}},[r("img",{staticClass:"w-full h-full rounded",attrs:{src:e.getVideoThumbnail(t)}}),t.data?r("div",[t.data.duration?r("small",{staticClass:"absolute bg-black-700 px-1 rounded-br",staticStyle:{bottom:"0",right:"0"}},[e._v(e._s(t.data.duration))]):e._e()]):e._e()]),r("div",{staticClass:"flex flex-col justify-center"},[r("h3",{staticClass:"text-lg font-bold break-all"},[e._v(e._s(e._f("truncate")(e.getVideoTitle(t),64)))]),t.data?r("div",[t.data.publishedAt?r("small",{staticClass:"mb-1"},[e._v("Uploaded on "+e._s(e._f("formatDate")(t.data.publishedAt)))]):e._e()]):e._e(),r("div",[n>0?r("d-btn",{staticClass:"bg-red-400 text-xs",attrs:{variant:"none",size:"xs"},on:{click:function(t){return e.$store.dispatch("room/removeVideoPlayerFromVideoPlayerQueue",{id:e.stream.id,queueId:e.queueIds[n]})}}},[r("i",{staticClass:"material-icons"},[e._v("delete")]),e._v(" Remove ")]):e._e(),0===n?r("d-btn",{staticClass:"bg-blue-400 text-xs",attrs:{variant:"none",size:"xs"},on:{click:function(t){return e.$store.dispatch("room/removeVideoPlayerFromVideoPlayerQueue",{id:e.stream.id,queueId:e.queueIds[0]})}}},[r("i",{staticClass:"material-icons"},[e._v("skip_next")]),e._v(" Skip Video ")]):e._e(),0===n?r("i",{staticClass:"text-sm"},[e._v("(Currently playing)")]):e._e()],1)])])])})),0)])},T=[],$=(r("07ac"),r("b64b"),{data:function(){return{url:""}},computed:{stream:function(){return this.$store.state.nav.modalData},queue:function(){return Object.values(this.stream.queue)},queueIds:function(){return Object.keys(this.stream.queue)}},methods:{onSubmit:function(){this.$store.dispatch("room/addVideoToVideoPlayerQueue",{id:this.stream.id,videoUrl:this.url}),this.url=""},getVideoTitle:function(e){return e.data&&e.data.title?e.data.title:"twitch"===e.type?"Twitch: ".concat(e.videoId):"directUrl"===e.type?"Direct URL: ".concat(e.videoId):"Error, this video type is invalid"},getVideoThumbnail:function(e){switch(e.type){case"youtube":return"https://i.ytimg.com/vi/".concat(e.videoId,"/mqdefault.jpg");case"dailymotion":return"https://dailymotion.com/thumbnail/video/".concat(e.videoId);case"twitch":return"https://static-cdn.jtvnw.net/previews-ttv/live_user_".concat(e.videoId,"-440x248.jpg");default:return"https://lh3.googleusercontent.com/proxy/L4zWa_ccM8ZavUzvwYeeKNmtRC9VcI5umcMBB5qqzsHxGEGziChFV1QrKe1hwP9Gst0pEfnPX1HpCCD-LPI0oJCJOkAsSdA"}}}}),M=$,j=Object(l["a"])(M,R,T,!1,null,null,null),D=j.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-2xl text-grey-400 mb-2"},[e._v("Change Name")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("d-input",{staticClass:"flex-grow mr-2 mb-4",attrs:{label:"Enter your new name",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("d-btn",{staticClass:"p-btn inline-block rounded font-bold bg-dark-2 px-3 py-2",attrs:{type:"submit",variant:"none"}},[e._v("Change Name")])],1)])},P=[],I={data:function(){return{username:""}},mounted:function(){this.username=this.$store.state.room.username},methods:{onSubmit:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.username){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$store.dispatch("room/changeUsername",{username:e.username});case 4:t.sent,e.$store.dispatch("nav/hideModal");case 6:case"end":return t.stop()}}),t)})))()}}},U=I,L=Object(l["a"])(U,A,P,!1,null,null,null),V=L.exports,N={components:{JoinRoom:y,AddVideoPlayer:O,AddVideoToPlayer:D,ChangeUsername:V},mounted:function(){window.addEventListener("keydown",this.onKeyDown)},watch:{"$store.state.nav.modal":function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=5;break}return r.next=3,t.$nextTick();case 3:n=t.$refs.modal.querySelector("input"),n&&n.focus();case 5:case"end":return r.stop()}}),r)})))()}},methods:{onKeyDown:function(e){27===e.keyCode&&this.$store.state.nav.modal&&this.close()},close:function(){this.$store.state.nav.modalData.noclose||this.$store.dispatch("nav/hideModal")}}},H=N,W=(r("8128"),Object(l["a"])(H,p,f,!1,null,null,null)),q=W.exports,z={components:{DModal:q,MainWrapper:m}},K=z,Y=(r("5c0b"),Object(l["a"])(K,a,s,!1,null,null,null)),F=Y.exports,J=r("2f62"),G=r("5530"),B=(r("d3b7"),"https://staging.joinleap.co"),X={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(B,"/api").concat(e),Object(G["a"])(Object(G["a"])({},t),{},{body:JSON.stringify(t.body),headers:Object(G["a"])({"Content-type":"application/json","socket-id":window.socket.id,"user-key":window.userKey},t.headers||{})})).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return r=e.sent,n=r.data,a=r.error,e.abrupt("return",{ok:t.ok,data:n,error:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.error)},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return X.get(e,Object(G["a"])({method:"POST"},t))},put:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return X.get(e,Object(G["a"])({method:"PUT"},t))},delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return X.get(e,Object(G["a"])({method:"DELETE"},t))}},Q={room:{join:function(e){return X.post("/room/join",{body:e})}},transport:{create:function(e){return X.post("/transport/create",{body:e})},connect:function(e){return X.post("/transport/connect",{body:e})},consume:function(e){return X.post("/transport/consume",{body:e})},produce:function(e){return X.post("/transport/produce",{body:e})},produced:function(e){return X.post("/transport/produced",{body:e})}},consumer:{pause:function(e){return X.post("/consumer/pause",{body:e})},close:function(e){return X.post("/consumer/close",{body:e})}},producer:{pause:function(e){return X.post("/producer/pause",{body:e})},close:function(e){return X.post("/producer/close",{body:e})}},stream:{webcam:function(e){return X.post("/stream/webcam",{body:e})},mic:function(e){return X.post("/stream/mic",{body:e})}},mic:{mute:function(e){return X.post("/mic/mute",{body:e})}},chat:{message:function(e){return X.post("/chat/message",{body:e})},username:function(e){return X.post("/chat/username",{body:e})}}},Z=function(e){var t=e.socket;return{state:{messages:[],users:{}},getters:{},mutations:{ADD_MESSAGE:function(e,t){e.messages.push(t)},SET_USERS:function(e,t){e.users=t}},actions:{join:function(e,r){var n=e.commit,a=r.room;n("SET_USERS",a.users),t.on("chat/message",(function(e){n("ADD_MESSAGE",e)})),t.on("chat/users",(function(e){n("SET_USERS",e)}))},sendMessage:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.rootState,n.room.roomId){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,Q.chat.message({text:t,roomId:n.room.roomId});case 5:return a=r.sent,s=a.ok,o=a.error,s||console.error(o),r.abrupt("return",!0);case 10:case"end":return r.stop()}}),r)})))()},leave:function(){t.off("chat/message"),t.off("chat/users")}},namespaced:!0}},ee=function(){return{state:{modal:"",modalData:{},contextMenu:"",contextMenuData:{},chat:!1},getters:{},mutations:{SET_MODAL:function(e,t){var r=t.id,n=t.data;e.modal=r,e.modalData=n},SET_CONTEXT_MENU:function(e,t){var r=t.id,n=t.data;e.contextMenu=r,e.contextMenuData=n},SET_CHAT:function(e,t){e.chat=t}},actions:{showModal:function(e,t){var r=e.commit,n=t.id,a=t.data,s=void 0===a?{}:a;r("SET_MODAL",{id:n,data:s})},hideModal:function(e){var t=e.commit;t("SET_MODAL","",{})},toggleChat:function(e){var t=e.state,r=e.commit;r("SET_CHAT",!t.chat)}},namespaced:!0}},te=(r("a434"),r("a15b"),r("ddfa")),re={getUserMedia:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.audio&&(e.audio={deviceId:"default",echoCancellation:!1,googAutoGainControl:!1}),t.next=4,navigator.mediaDevices.getUserMedia(e);case 4:if(r=t.sent,!r){t.next=9;break}return t.abrupt("return",{ok:!0,stream:r});case 9:return alert("Could not get your requested media"),t.abrupt("return",{ok:!1});case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",{ok:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getDisplayMedia:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.audio&&(e.audio={autoGainControl:!1,echoCancellation:!1,googAutoGainControl:!1,noiseSuppression:!1}),t.next=4,navigator.mediaDevices.getDisplayMedia(e);case 4:if(r=t.sent,!r){t.next=9;break}return t.abrupt("return",{ok:!0,stream:r});case 9:return alert("Could not get your requested media"),t.abrupt("return",{ok:!1});case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t["catch"](0),console.error(t.t0),t.abrupt("return",{ok:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}},ne=function(e){var t=e.socket,r={roomId:null,username:null,device:null,sendTransport:null,recvTransport:null,activeProduceHandshakeType:"",consumers:{},streams:{webcam:[],mic:[]},producers:{webcam:null,mic:null},localStreams:{webcam:null,mic:null}},a={},s={SET_ROOM_ID:function(e,t){e.roomId=t},SET_USERNAME:function(e,t){e.username=t},SET_DEVICE:function(e,t){e.device=new te["Device"],e.device.load(t)},CLOSE_DEVICE:function(e){e.device=null},SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE:function(e,t){e.activeProduceHandshakeType=t},SET_STREAMS:function(e,t){e.streams.webcam=t.webcam,e.streams.mic=t.mic},ADD_STREAM:function(e,t){var r=t.type,n=t.stream;e.streams[r].push(n)},REMOVE_STREAM:function(e,t){var r=t.type,n=t.stream,a=e.streams[r];a.splice(a.indexOf(n),1)},SET_RECV_TRANSPORT:function(e,t){e.recvTransport=t},CLOSE_RECV_TRANSPORT:function(e){e.recvTransport&&(e.recvTransport.close(),e.recvTransport=null)},SET_SEND_TRANSPORT:function(e,t){e.sendTransport=t},CLOSE_SEND_TRANSPORT:function(e){e.sendTransport&&(e.sendTransport.close(),e.sendTransport=null)},ADD_CONSUMER:function(e,t){var r=t.producerId,a=t.consumer;n["a"].set(e.consumers,r,a)},CLOSE_CONSUMER:function(e,t){e.consumers[t].close(),n["a"].delete(e.consumers,t)},SET_PRODUCER:function(e,t){var r=t.type,n=t.producer;e.producers[r]=n},CLOSE_PRODUCER:function(e,r){var n=e.producers[r];if(n){var a=n.id;n.close(),e.producers[r]=null,t.off("producer/close/".concat(a))}},SET_LOCAL_STREAM:function(e,t){var r=t.type,n=t.stream;e.localStreams[r]=n},CLOSE_LOCAL_STREAM:function(e,t){e.localStreams[t]&&(e.localStreams[t].getTracks((function(e){return e.stop()})),e.localStreams[t]=null)}},o={join:function(e,r){return Object(h["a"])(regeneratorRuntime.mark((function n(){var a,s,o,c,i,u,l,d,m,p,f,v,b,x,_;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.state,s=e.commit,o=e.dispatch,c=r.roomId,i=r.username,n.next=4,Q.room.join({roomId:c,username:i});case 4:if(u=n.sent,u.ok){n.next=8;break}return console.error(u.error),n.abrupt("return");case 8:return t.on("stream/webcam",function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o("consumeWebcam",t);case 2:s("ADD_STREAM",{type:"webcam",stream:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("stream/mic",function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o("consumeMic",t);case 2:s("ADD_STREAM",{type:"mic",stream:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=u.data,d=l.routerRtpCapabilities,m=l.streams,p=l.room,f=l.key,window.userKey=f,s("SET_ROOM_ID",c),s("SET_USERNAME",i),s("SET_DEVICE",{routerRtpCapabilities:d}),n.next=17,Q.transport.create({type:"recv",roomId:c});case 17:if(u=n.sent,u.ok){n.next=21;break}return console.error(u.error),n.abrupt("return");case 21:return n.next=23,a.device.createRecvTransport(u.data.transportOptions);case 23:return v=n.sent,v.on("connect",function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dtlsParameters,e.next=3,Q.transport.connect({type:"recv",transportOptions:{transportId:v.id,dtlsParameters:a}});case 3:if(u=e.sent,u.ok){e.next=8;break}return console.error(u.error),n(),e.abrupt("return");case 8:r();case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),s("SET_RECV_TRANSPORT",v),n.next=28,Q.transport.create({type:"send",roomId:c});case 28:if(u=n.sent,u.ok){n.next=32;break}return console.error(u.error),n.abrupt("return");case 32:return n.next=34,a.device.createSendTransport(u.data.transportOptions);case 34:b=n.sent,b.on("connect",function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dtlsParameters,e.next=3,Q.transport.connect({type:"send",transportOptions:{transportId:b.id,dtlsParameters:a}});case 3:if(u=e.sent,u.ok){e.next=8;break}return console.error(u.error),n(),e.abrupt("return");case 8:r();case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),b.on("produce",function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Q.transport.produce({producerOptions:{transportId:b.id,kind:t.kind,rtpParameters:t.rtpParameters},type:a.activeProduceHandshakeType,roomId:a.roomId});case 2:if(u=e.sent,u.ok){e.next=8;break}return console.error(u.error),n(),s("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE",""),e.abrupt("return");case 8:if(r(u.data),"audio"!==a.activeProduceHandshakeType){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,Q.transport.produced({type:a.activeProduceHandshakeType,roomId:a.roomId});case 13:if(u=e.sent,u.ok){e.next=19;break}return console.error(u.error),n(),s("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE",""),e.abrupt("return");case 19:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),s("SET_SEND_TRANSPORT",b),x=0;case 39:if(!(x<m.webcam.length)){n.next=45;break}return n.next=42,o("consumeWebcam",m.webcam[x]);case 42:x++,n.next=39;break;case 45:_=0;case 46:if(!(_<m.mic.length)){n.next=52;break}return n.next=49,o("consumeMic",m.mic[_]);case 49:_++,n.next=46;break;case 52:return s("SET_STREAMS",m),o("chat/join",{room:p},{root:!0}),n.abrupt("return",!0);case 55:case"end":return n.stop()}}),n)})))()},consume:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.state,r.next=3,Q.transport.consume({consumerOptions:{producerId:t,rtpCapabilities:a.device.rtpCapabilities}});case 3:if(s=r.sent,s.ok){r.next=7;break}return console.error(s.error),r.abrupt("return");case 7:return r.next=9,a.recvTransport.consume(s.data.consumerOptions);case 9:return o=r.sent,r.next=12,Q.consumer.pause({consumerId:o.id,state:"resume"});case 12:n("ADD_CONSUMER",{producerId:t,consumer:o});case 13:case"end":return r.stop()}}),r)})))()},stopConsume:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=e.commit,s=n.consumers[t],s){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,Q.consumer.close({consumerId:s.id});case 6:if(o=r.sent,c=o.ok,i=o.error,c){r.next=12;break}return console.error(i),r.abrupt("return");case 12:a("CLOSE_CONSUMER",t);case 13:case"end":return r.stop()}}),r)})))()},toggleConsume:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.state,a=e.dispatch,s=!!n.consumers[t],!s){r.next=7;break}return r.next=5,a("stopConsume",t);case 5:r.next=9;break;case 7:return r.next=9,a("consume",t);case 9:case"end":return r.stop()}}),r)})))()},consumeWebcam:function(e,r){return Object(h["a"])(regeneratorRuntime.mark((function n(){var a,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,s=e.dispatch,o=r.producerId,n.next=4,s("consume",o);case 4:t.on("producer/close/".concat(o),(function(){s("stopConsume",o),a("REMOVE_STREAM",{type:"webcam",stream:r}),t.off("producer/close/".concat(o))}));case 5:case"end":return n.stop()}}),n)})))()},consumeMic:function(e,r){return Object(h["a"])(regeneratorRuntime.mark((function n(){var a,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,s=e.dispatch,o=r.producerId,n.next=4,s("consume",o);case 4:t.on("producer/close/".concat(o),(function(){s("stopConsume",o),a("REMOVE_STREAM",{type:"mic",stream:r}),t.off("producer/close/".concat(o))}));case 5:case"end":return n.stop()}}),n)})))()},produce:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,r.next=3,n.sendTransport.produce({track:t,codecOptions:{videoGoogleMaxBitrate:4e3}});case 3:return a=r.sent,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},produceWebcam:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o,c,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.dispatch,t.next=3,re.getUserMedia({video:{maxWidth:"1280",maxHeight:"720"}});case 3:if(a=t.sent,s=a.ok,o=a.error,c=a.stream,s){t.next=10;break}return console.error(o),t.abrupt("return");case 10:return i=c.getVideoTracks()[0],i.onended=function(){return n("stopProduceWebcam")},r("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE","webcam"),t.next=15,n("produce",i);case 15:u=t.sent,r("SET_PRODUCER",{type:"webcam",producer:u}),r("SET_LOCAL_STREAM",{type:"webcam",stream:c}),r("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE","");case 19:case"end":return t.stop()}}),t)})))()},stopProduceWebcam:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Q.producer.close({producerId:r.producers.webcam.id});case 3:if(a=t.sent,s=a.ok,o=a.error,s){t.next=9;break}return console.error(o),t.abrupt("return");case 9:n("CLOSE_PRODUCER","webcam"),n("CLOSE_LOCAL_STREAM","webcam");case 11:case"end":return t.stop()}}),t)})))()},produceMic:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o,c,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.dispatch,t.next=3,re.getUserMedia({audio:!0});case 3:if(a=t.sent,s=a.ok,o=a.error,c=a.stream,s){t.next=10;break}return console.error(o),t.abrupt("return");case 10:return i=c.getAudioTracks()[0],i.onended=function(){return n("stopProduceMic")},r("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE","mic"),t.next=15,n("produce",i);case 15:u=t.sent,r("SET_PRODUCER",{type:"mic",producer:u}),r("SET_LOCAL_STREAM",{type:"mic",stream:c}),r("SET_ACTIVE_PRODUCE_HANDSHAKE_TYPE","");case 19:case"end":return t.stop()}}),t)})))()},stopProduceMic:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,t.next=3,Q.producer.close({producerId:r.producers.mic.id});case 3:if(a=t.sent,s=a.ok,o=a.error,s){t.next=9;break}return console.error(o),t.abrupt("return");case 9:n("CLOSE_PRODUCER","mic"),n("CLOSE_LOCAL_STREAM","mic");case 11:case"end":return t.stop()}}),t)})))()},changeUsername:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=e.commit,s=t.username,r.next=4,Q.chat.username({roomId:n.roomId,username:s});case 4:if(o=r.sent,c=o.ok,i=o.error,c){r.next=10;break}return console.error(i),r.abrupt("return",!1);case 10:return a("SET_USERNAME",s),r.abrupt("return",!0);case 12:case"end":return r.stop()}}),r)})))()},leave:function(e){var n=e.commit;for(var a in t.emit("room/leave"),n("SET_ROOM_ID",null),n("SET_USERNAME",null),n("SET_STREAMS",{webcam:null,mic:null}),r.consumers)n("CLOSE_CONSUMER",a);for(var s in r.producers)n("CLOSE_PRODUCER",s);for(var o in n("CLOSE_RECV_TRANSPORT"),n("CLOSE_SEND_TRANSPORT"),n("CLOSE_DEVICE"),r.localStreams)n("CLOSE_LOCAL_STREAM",o);t.off("stream/webcam"),t.off("stream/mic")}};return{state:r,getters:a,mutations:s,actions:o,namespaced:!0}},ae=function(e){e.socket;var t={local:{mic:{isPaused:!1}},remote:{}},r={},n={PAUSE_LOCAL_TRACK:function(e,t){var r=t.type,n=t.value;e.local[r].isPaused=n},PAUSE_REMOTE_TRACK:function(e,t){t.socketId;var r=t.value;e.remtote[producerId].isPaused=r}},a={pauseProducer:function(e,t){return Object(h["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,c,i,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.rootState,s=t.type,o=t.value,n("PAUSE_LOCAL_TRACK",{type:s,value:o}),r.next=5,Q.mic.mute({producerId:a.room.producers[s].id,mute:o,roomId:a.room.roomId});case 5:if(c=r.sent,i=c.ok,u=c.error,i){r.next=11;break}return console.error(u),r.abrupt("return");case 11:case"end":return r.stop()}}),r)})))()}};return{state:t,getters:r,mutations:n,actions:a,namespaced:!0}};n["a"].use(J["a"]);var se=function(e){var t=e.socket;return new J["a"].Store({modules:{chat:Z({socket:t}),room:ne({socket:t}),nav:ee(),tracks:ae({socket:t})}})},oe=r("8c4f"),ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex justify-center"},[r("div",{staticClass:"text-gray-300 bg-dark-5 p-3 mt-6 rounded-md w-full max-w-128"},[r("h1",{staticClass:"text-2xl font-bold"},[e._v("Create a Doice room")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.createRoom(t)}}},[r("d-input",{staticClass:"w-full mt-2 mb-4",attrs:{required:"",label:"Enter your name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("d-btn",{staticClass:"p-btn inline-block rounded font-bold bg-dark-2 px-3 py-2",attrs:{type:"submit",variant:"none"}},[e._v("Create a Room")])],1)])])},ie=[],ue=(r("b0c0"),r("25f0"),{data:function(){return{name:""}},methods:{createRoom:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name){t.next=2;break}return t.abrupt("return");case 2:return r=Math.random().toString(36).substr(2,9),t.next=5,e.$store.dispatch("room/join",{roomId:r,username:e.name});case 5:if(n=t.sent,n){t.next=8;break}return t.abrupt("return");case 8:e.$router.push("/".concat(r));case 9:case"end":return t.stop()}}),t)})))()}}}),le=ue,de=Object(l["a"])(le,ce,ie,!1,null,null,null),me=de.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex w-full h-full bg-black-800 rounded-tl-lg rounded-tr-lg p-5"},[r("div",{staticClass:"flex flex-col overflow-hidden w-full"},[r("h2",{staticClass:"text-2xl text-white"},[e._v(" #23 - Yussef Guf ")]),r("div",{staticClass:"flex-grow p-2",attrs:{id:"room-container"}},[r("div",{staticClass:"flex flex-wrap md:flex-row items-center justify-center w-full h-full"},[r("VideoContainer",{staticClass:"w-full h-full"},e._l(e.webcams,(function(e){return r("div",{key:e.producerId,staticClass:"video"},[r("RemoteWebcam",{attrs:{stream:e}})],1)})),0)],1)]),r("div",{staticClass:"absolute visually-hidden"},e._l(e.mics,(function(e){return r("VoiceChatter",{key:e.producerId,attrs:{stream:e}})})),1),r("div",{staticClass:"flex justify-center w-full"},[r("Controls")],1)]),e.$store.state.nav.chat?r("ChatRoom",{staticClass:"flex-shrink-0"}):e._e()],1)},fe=[],he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"videos",staticClass:"videos relative flex flex-wrap w-full h-full items-center justify-center overflow-hidden"},[e._t("default")],2)},ve=[];r("159b");function be(e,t){if(t>e){var r=e;e=t,t=r}while(0!=t){var n=e%t;e=t,t=n}return e}function xe(e,t){var r=be(e,t);return{w:e/r,h:t/r}}var _e={mounted:function(){var e=this;this.setProperSize(),window.addEventListener("resize",this.setProperSize),this.unsubscribeFromActions=this.$store.subscribe(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.setProperSize();case 3:case"end":return t.stop()}}),t)}))))},beforeDestroy:function(){window.removeEventListener("resize",this.setProperSize),this.unsubscribeFromActions()},methods:{setProperSize:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o,c,i,u,l,d,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.videos){t.next=2;break}return t.abrupt("return");case 2:for(e.$refs.videos.style.height="100%",r=e.$refs.videos.offsetHeight,n=e.$refs.videos.offsetWidth,a=e.$refs.videos.querySelectorAll(".video"),s=a.length,o=0,c=0,i=0,u=1;u<=s;u++)l=Math.ceil(s/u),d=Math.floor(n/u),m=Math.floor(r/l),p=a[u-1],p.style.position="absolute",p.style.height="auto",p.style.width="auto",xe(p.offsetWidth,p.offsetHeight),p.style.position="",4*d/5<m?m=5*d/4:d=4*m/5,d>c&&(c=d,o=m,i=l);e.$refs.videos.style.height="".concat(Math.floor(i*o),"px"),a.forEach((function(e){e.style.height="".concat(Math.floor(o),"px"),e.style.width="".concat(Math.floor(c),"px")}));case 13:case"end":return t.stop()}}),t)})))()}}},ge=_e,ye=(r("282d"),Object(l["a"])(ge,he,ve,!1,null,null,null)),we=ye.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-full h-full bg-red-700 rounded-lg"},[r("video",{ref:"video",staticClass:"bg-black object-cover w-full h-full rounded-lg",attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0},on:{contextmenu:function(t){return t.preventDefault(),e.showRemoteWebcamMenu(t)}}})])},ke=[],Ee={props:{stream:{type:Object,required:!0}},computed:{consumer:function(){return this.$store.state.room.consumers[this.stream.producerId]},track:function(){return this.consumer.track}},mounted:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.video.srcObject=new MediaStream([e.track]);case 1:case"end":return t.stop()}}),t)})))()},methods:{showRemoteWebcamMenu:function(e){this.$store.commit("nav/SET_CONTEXT_MENU",{id:"remote-webcam",data:{$event:e,stream:this.stream}})}}},Se=Ee,Oe=Object(l["a"])(Se,Ce,ke,!1,null,null,null),Re=Oe.exports,Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("audio",{ref:"audio",attrs:{autoplay:""}})},$e=[],Me={props:{stream:{type:Object,required:!0}},computed:{consumer:function(){return this.$store.state.room.consumers[this.stream.producerId]},track:function(){return this.consumer.track}},mounted:function(){this.$refs.audio.srcObject=new MediaStream([this.track])},watch:{"stream.isPaused":function(e){this.$refs.audio.muted=e}}},je=Me,De=Object(l["a"])(je,Te,$e,!1,null,null,null),Ae=De.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex rounded-lg p-2 bg-gray-700"},[r("div",{staticClass:"flex justify-center"},[r("div",{staticClass:"controls flex"},[e._m(0),e.$store.state.room.localStreams.mic?r("button",{staticClass:"text-red-700 px-4 py-2",on:{click:function(t){return e.$store.dispatch("room/stopProduceMic")}}},[r("div",{staticClass:"material-icons"},[e._v("mic_off")]),r("div",{staticClass:"text-sm"},[e._v("Disable Mic")])]):r("button",{staticClass:"text-white px-4 py-2",attrs:{disabled:!!e.room.activeProduceHandshakeType},on:{click:function(t){return e.$store.dispatch("room/produceMic")}}},[r("div",{staticClass:"material-icons"},[e._v("mic")]),r("div",{staticClass:"text-sm"},[e._v("Enable Mic")])]),e.room.localStreams.webcam?r("button",{staticClass:"text-red-700 px-4 py-2",on:{click:function(t){return e.$store.dispatch("room/stopProduceWebcam")}}},[r("span",{staticClass:"material-icons"},[e._v("videocam_off")]),r("div",{staticClass:"text-sm"},[e._v("Disable Webcam")])]):r("button",{staticClass:"text-white px-4 py-2",attrs:{disabled:!!e.room.activeProduceHandshakeType},on:{click:function(t){return e.$store.dispatch("room/produceWebcam")}}},[r("span",{staticClass:"material-icons"},[e._v("videocam")]),r("div",{staticClass:"text-sm"},[e._v("Enable Webcam")])]),e._m(1),r("button",{staticClass:"text-white px-4 py-2",class:(e.$store.state.nav.chat,""),on:{click:function(t){return e.$store.dispatch("nav/toggleChat")}}},[r("span",{staticClass:"material-icons"},[e._v("people_alt")]),r("div",{staticClass:"text-sm"},[e._v("Audience")])]),e._m(2)])])])},Ie=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"text-red-700 px-4 py-2"},[r("div",{staticClass:"material-icons"},[e._v("fiber_manual_record")]),r("div",{staticClass:"text-sm"},[e._v("Start Recording")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"text-white px-4 py-2"},[r("div",{staticClass:"material-icons"},[e._v("bookmark")]),r("div",{staticClass:"text-sm"},[e._v("Mark")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"text-white bg-red-600 rounded-lg px-5 ml-8"},[r("span",{staticClass:"material-icons"},[e._v("call_end")]),r("div",{staticClass:"text-sm"},[e._v("End Call")])])}],Ue={data:function(){return{isAddVideoModalVisible:!1}},computed:{roomUrl:function(){return window.location.origin+this.$route.path},room:function(){return this.$store.state.room}}},Le=Ue,Ve=Object(l["a"])(Le,Pe,Ie,!1,null,null,null),Ne=Ve.exports,He=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col h-full bg-gray-700 rounded-lg text-gray-400 text-center",staticStyle:{width:"25rem"}},[r("h2",[e._v("Paticipants")]),r("ul",{staticClass:"p-3"},e._l(Object.keys(e.$store.state.chat.users),(function(e){return r("li",{key:e},[r("img",{staticClass:"rounded-full",staticStyle:{width:"52px",height:"52px","object-fit":"cover"},attrs:{src:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fs.abcnews.com%2Fimages%2FUS%2FHT_paul_dewolf_dm_130726_16x9_992.jpg&f=1&nofb=1",alt:""}})])})),0),r("h2",[e._v("Live Chats")]),r("div",{staticClass:"flex flex-col text-left flex-grow"},[r("div",{ref:"chat",staticClass:"flex-grow overflow-y-auto scrollbar relative",staticStyle:{height:"1px"}},[r("ul",{staticClass:"list-style-none flex flex-col py-2"},e._l(e.$store.state.chat.messages,(function(e,t){return r("ChatMessage",{key:t,attrs:{message:e}})})),1)])]),r("div",{staticClass:"relative bg-gray-600",staticStyle:{height:"3.5rem"}},[r("div",{staticClass:"w-full h-full"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"w-full h-full bg-gray-600 text-gray-300 text-xs p-1",attrs:{placeholder:"Enter a message..."},domProps:{value:e.text},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))},input:function(t){t.target.composing||(e.text=t.target.value)}}}),r("div",{staticClass:"absolute flex bottom-0 right-0 py-2 px-1 items-center"},[r("d-btn",{staticClass:"text-xs px-2",attrs:{variant:"primary",size:"xs",disabled:e.text.length>256},on:{click:e.sendMessage}},[e._v("Send")])],1)])])])},We=[],qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"text-xs px-2 text-gray-300 my-1"},[r("h3",{staticClass:"text-xs font-bold"},[e._v(e._s(e.message.username))]),"message"===e.type?r("p",{staticClass:"text-xs break-words",domProps:{innerHTML:e._s(e.computedMessage)}}):"action"===e.type?r("p",{staticClass:"text-xs break-words opacity-75 italic",domProps:{innerHTML:e._s(e.computedMessage)}}):"img"===e.type?r("img",{staticClass:"w-full rounded-md",attrs:{src:e.computedMessage}}):e._e()])},ze=[],Ke=r("3835"),Ye=(r("ac1f"),r("5319"),/(https?:\/\/)?(\w+(\.\w{2,})+(\/\S+)?)/g),Fe=/^(https:\/\/)(\S+\.\S{2,}\.(png|jpg|jpeg|gif|webp|svg))((\/|\?)\S+)?$/,Je={props:{message:{type:Object,required:!0}},data:function(){return{type:"message"}},computed:{users:function(){return this.$store.state.chat.users},computedMessage:function(){var e,t=this.message.text;if("action"===this.message.type)return this.type="action",t;if(Fe.test(t))return this.type="img",t;var r=t;while(e=Ye.exec(t)){var n=e,a=Object(Ke["a"])(n,3),s=a[0],o=a[1],c=void 0===o?"http://":o,i=a[2],u=c+i;r=r.replace(s,'<a href="'.concat(u,'" class="text-gray-300 underline" target="_blank">').concat(i,"</a>"))}return this.type="message",r}}},Ge=Je,Be=Object(l["a"])(Ge,qe,ze,!1,null,null,null),Xe=Be.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"flex items-center mb-2 hover:bg-gray-900 rounded py-1 px-2 cursor-default",on:{contextmenu:function(t){return t.preventDefault(),e.showParticipantMenu(t,e.socketId)}}},[r("span",{staticClass:"material-icons text-base pr-1"},[e._v("person")]),r("span",{staticClass:"flex-grow font-bold"},[e._v(" "+e._s(e.$store.state.chat.users[e.socketId].username)+" ")]),r("div",{staticClass:"flex"},[e.isVideoDisabled?r("span",{staticClass:"material-icons opacity-50 text-base text-red-600 w-6"},[e._v("stop_screen_share_off")]):e._e(),e.isWebcamDisabled?r("span",{staticClass:"material-icons opacity-50 text-base text-red-600 w-6"},[e._v("videocam_off")]):e._e(),e.isMicMuted?r("span",{staticClass:"material-icons opacity-50 text-base"},[e._v(" mic_off ")]):e.isMicDisabled?r("span",{staticClass:"material-icons opacity-50 text-base text-red-600"},[e._v(" mic_off ")]):e._e()])])},Ze=[],et={props:{socketId:{type:String,required:!0}},computed:{isLocalUser:function(){return this.socketId===window.socket.id},isMicDisabled:function(){return!this.isLocalUser&&this.isUserStreamOfTypeDisabledLocally("mic")},isVideoDisabled:function(){return!this.isLocalUser&&this.isUserStreamOfTypeDisabledLocally("video")},isMicMuted:function(){return this.isLocalUser?!this.$store.state.room.localStreams.mic:!this.$store.state.chat.users[this.socketId].producerIds.mic},isWebcamDisabled:function(e){return!this.isLocalUser&&this.isUserStreamOfTypeDisabledLocally("webcam")}},methods:{isUserStreamOfTypeDisabledLocally:function(e){var t=this.$store.state.chat.users[this.socketId].producerIds[e];return t&&!this.$store.state.room.consumers[t]},showParticipantMenu:function(e){this.$store.commit("nav/SET_CONTEXT_MENU",{id:this.isLocalUser?"participant-self":"participant",data:{$event:e,socketId:this.socketId}})}}},tt=et,rt=Object(l["a"])(tt,Qe,Ze,!1,null,null,null),nt=rt.exports,at={components:{ChatParticipant:nt,ChatMessage:Xe},data:function(){return{text:""}},methods:{doScroll:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:r=e.$refs.chat,r.scrollTo?r.scrollTo({top:r.scrollHeight,left:0,behavior:"smooth"}):r.scrollTop=r.scrollHeight;case 4:case"end":return t.stop()}}),t)})))()},sendMessage:function(){this.text&&(this.$store.dispatch("chat/sendMessage",this.text),this.text="")}},watch:{"$store.state.chat.messages":function(){this.doScroll()}}},st=at,ot=Object(l["a"])(st,He,We,!1,null,null,null),ct=ot.exports,it={components:{VideoContainer:we,RemoteWebcam:Re,VoiceChatter:Ae,Controls:Ne,ChatRoom:ct},computed:{room:function(){return this.$store.state.room},webcams:function(){return this.room.streams.webcam},mics:function(){return this.room.streams.mic}},mounted:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.room.roomId){t.next=2;break}return t.abrupt("return");case 2:e.$store.dispatch("room/join",{roomId:e.$route.params.roomId,username:"Anonymous"});case 3:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.$store.dispatch("room/leave")}},ut=it,lt=Object(l["a"])(ut,pe,fe,!1,null,null,null),dt=lt.exports;n["a"].use(oe["a"]);var mt=new oe["a"]({mode:"history",routes:[{path:"/",name:"Home",component:me},{path:"/:roomId",name:"Room",component:dt}]}),pt=(r("c898"),r("d4ec")),ft=r("bee2"),ht=r("8055"),vt=r.n(ht),bt=function(){function e(){Object(pt["a"])(this,e),this.socket=vt()("https://staging.joinleap.co")}return Object(ft["a"])(e,[{key:"emit",value:function(e,t){this.socket.emit(e,t)}},{key:"on",value:function(e,t){this.socket.on(e,t)}},{key:"off",value:function(e,t){this.socket.off(e,t)}}]),e}(),xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"block text-lg rounded-lg"},[r("div",{staticClass:"flex",class:{"flex-wrap items-center":"checkbox"!==e.type}},["checkbox"===e.type?r("input",e._b({staticClass:"w-6 h-6 mr-2 flex-shrink-0 bg-gray-200 text-gray-800 border rounded-lg",attrs:{type:"checkbox"},on:{input:function(t){return e.$emit("input",!e.value)}}},"input",e.$attrs,!1)):e._e(),e.label?r("span",{class:{"visually-hidden":e.screenReaderOnly}},[e._v(" "+e._s(e.label)+" "),void 0!==e.$attrs.required?r("span",{staticClass:"text-red-500",attrs:{title:"Required","aria-hidden":""}},[e._v("*")]):e._e()]):e._e(),["text","email","password"].indexOf(e.type)>-1?r("input",e._b({staticClass:"rounded-lg text-xl text-gray-900 h-10 py-2 px-3 w-full bg-gray-300",class:e.invalid?"border-red-500":"",attrs:{type:e.type},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("blur")}}},"input",e.$attrs,!1)):e._e()])])},_t=[],gt=(r("a9e3"),["text","email","password","checkbox"]),yt={props:{value:{type:[String,Number,Boolean],required:!0},type:{type:String,default:"text",validator:function(e){return gt.indexOf(e)>-1}},label:String,screenReaderOnly:{type:Boolean,default:!1},invalid:Boolean}},wt=yt,Ct=(r("f62c"),Object(l["a"])(wt,xt,_t,!1,null,null,null)),kt=Ct.exports,Et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",e._g(e._b({staticClass:"p-btn flex items-center inline-block font-bold",class:"btn-"+e.variant+" "+e.computedSize+" "+(e.norounded?"":"rounded")},"button",e.$attrs,!1),e.$listeners),[e._t("default")],2)},St=[],Ot=["none","primary","primary-hover","white","white-outline","dark","primary-dashed"],Rt=["xs","sm","md","lg"],Tt={props:{variant:{type:String,required:!0,validator:function(e){return Ot.indexOf(e)>-1}},size:{type:String,default:"md",validator:function(e){return Rt.indexOf(e)>-1}},norounded:Boolean},computed:{computedSize:function(){switch(this.size){case"xs":return"px-1";case"sm":return"py-1 px-2";case"md":return"py-2 px-3";case"lg":return"py-3 px-4"}}}},$t=Tt,Mt=(r("5b6f"),Object(l["a"])($t,Et,St,!1,null,null,null)),jt=Mt.exports,Dt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},At=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lds-ring"},[r("div"),r("div"),r("div"),r("div")])}],Pt={},It=Pt,Ut=(r("c823"),Object(l["a"])(It,Dt,At,!1,null,null,null)),Lt=Ut.exports,Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"},{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],ref:"popper",staticClass:"context-menu fixed overflow-hidden rounded-md bg-gray-900 text-gray-200 p-2",attrs:{tabindex:"-1"},on:{"!contextmenu":function(e){e.preventDefault()}}},[r("ul",{staticClass:"list-style-none m-0 p-2"},["participant"===e.$store.state.nav.contextMenu?e._t("default",[r("ParticipantMenu")]):"participant-self"===e.$store.state.nav.contextMenu?e._t("default",[r("ParticipantSelfMenu")]):"remote-webcam"===e.$store.state.nav.contextMenu?e._t("default",[r("RemoteWebcamMenu")]):e._e(),"default"===e.$store.state.nav.contextMenu?e._t("default",[r("span",{staticClass:"opacity-50 italic"},[e._v("No options")])]):e._e()],2)])},Nt=[],Ht=r("f0bd"),Wt=r("e67d"),qt=r.n(Wt),zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.user.producerIds.mic||e.user.producerIds.video||e.user.producerIds.webcam?r("div",{staticClass:"pb-3"},[r("li",{staticClass:"text-xs pb-1"},[e._v(" "+e._s(e.user.username)+" ")]),e.user.producerIds.mic?r("div",[e.consumers[e.user.producerIds.mic]?r("d-context-menu-item",{on:{click:e.toggleMic}},[e._v(" Mute ")]):r("d-context-menu-item",{on:{click:e.toggleMic}},[e._v(" Unmute ")])],1):e._e(),e.user.producerIds.video?r("div",[e.consumers[e.user.producerIds.video]?r("d-context-menu-item",{on:{click:e.toggleVideo}},[e._v(" Disable Video ")]):r("d-context-menu-item",{on:{click:e.toggleVideo}},[e._v(" Enable Video ")])],1):e._e(),e.user.producerIds.webcam?r("div",[e.consumers[e.user.producerIds.webcam]?r("d-context-menu-item",{on:{click:e.toggleWebcam}},[e._v(" Disable Webcam ")]):r("d-context-menu-item",{on:{click:e.toggleWebcam}},[e._v(" Enable Webcam ")])],1):e._e()]):e._e()])},Kt=[],Yt={computed:{socketId:function(){return this.$store.state.nav.contextMenuData.socketId},user:function(){return this.$store.state.chat.users[this.socketId]},consumers:function(){return this.$store.state.room.consumers}},methods:{toggleMic:function(){this.$store.dispatch("room/toggleConsume",this.user.producerIds.mic)},toggleVideo:function(){this.$store.dispatch("room/toggleConsume",this.user.producerIds.video),this.$store.dispatch("room/toggleConsume",this.user.producerIds.audio)},toggleWebcam:function(){this.$store.dispatch("room/toggleConsume",this.user.producerIds.webcam)}}},Ft=Yt,Jt=Object(l["a"])(Ft,zt,Kt,!1,null,null,null),Gt=Jt.exports,Bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"pb-3"},[r("li",{staticClass:"text-xs pb-1"},[e._v(" "+e._s(e.user.username)+" ")]),r("div",[e.room.localStreams.mic?r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/stopProduceMic")}}},[e._v(" Disable Mic ")]):r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/produceMic")}}},[e._v(" Enable Mic ")])],1),r("div",[e.room.localStreams.video?r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/stopProduceDesktop")}}},[e._v(" Disable Video ")]):r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/produceDesktop")}}},[e._v(" Enable Video ")])],1),r("div",[e.room.localStreams.webcam?r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/stopProduceWebcam")}}},[e._v(" Disable Webcam ")]):r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/produceWebcam")}}},[e._v(" Enable Webcam ")])],1)]),r("div",[r("li",{staticClass:"text-xs pb-1"},[e._v(" You ")]),r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("nav/showModal",{id:"change-username"})}}},[e._v(" Change Username ")])],1)])},Xt=[],Qt={computed:{room:function(){return this.$store.state.room},user:function(){return this.$store.state.chat.users[this.$store.state.nav.contextMenuData.socketId]}}},Zt=Qt,er=Object(l["a"])(Zt,Bt,Xt,!1,null,null,null),tr=er.exports,rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("li",{staticClass:"text-xs pb-1"},[e._v(" "+e._s(e.user.username)+" ")]),r("div",[r("d-context-menu-item",{on:{click:function(t){return e.$store.dispatch("room/toggleConsume",e.user.producerIds.webcam)}}},[e._v(" Disable Webcam ")])],1)])},nr=[],ar={computed:{room:function(){return this.$store.state.room},user:function(){return this.$store.state.chat.users[this.$store.state.nav.contextMenuData.stream.socketId]}}},sr=ar,or=Object(l["a"])(sr,rr,nr,!1,null,null,null),cr=or.exports,ir={components:{Popper:Ht["a"],ParticipantMenu:Gt,ParticipantSelfMenu:tr,RemoteWebcamMenu:cr},props:{boundariesElement:{type:String,default:"body"}},data:function(){return{opened:!1,contextData:{}}},directives:{ClickOutside:qt.a},computed:{isVisible:function(){return this.opened}},watch:{"$store.state.nav.contextMenu":function(e){e?this.open():this.close()}},methods:{open:function(e,t){var r=this;e=this.$store.state.nav.contextMenuData.$event,this.opened=!0,this.contextData=t,this.popper&&this.popper.destroy(),this.popper=new Ht["a"](this.referenceObject(e),this.$refs.popper,{placement:"right-start",modifiers:{preventOverflow:{boundariesElement:document.querySelector(this.boundariesElement)}}}),this.$nextTick((function(){r.popper.scheduleUpdate()}))},close:function(){this.opened=!1,this.contextData=null,this.$store.commit("nav/SET_CONTEXT_MENU",{id:"",data:{}})},referenceObject:function(e){var t=e.clientX,r=e.clientY,n=t+1,a=r+1,s=1,o=1;function c(){return{left:t,top:r,right:n,bottom:a}}var i={getBoundingClientRect:c,clientWidth:s,clientHeight:o};return i}},beforeDestroy:function(){void 0!==this.popper&&this.popper.destroy()}},ur=ir,lr=(r("c229"),Object(l["a"])(ur,Vt,Nt,!1,null,"f3988fbe",null)),dr=lr.exports,mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"context-menu-item relative block p-2 text-sm rounded-md cursor-pointer font-bold",on:{click:e.onClick}},[e._t("default")],2)},pr=[],fr={methods:{onClick:function(e){this.$emit("click",e),this.$store.commit("nav/SET_CONTEXT_MENU",{id:"",data:{}})}}},hr=fr,vr=(r("19f2"),Object(l["a"])(hr,mr,pr,!1,null,"66cb5179",null)),br=vr.exports,xr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d-btn",{attrs:{variant:e.variant,size:e.size},on:{click:e.copy}},[e._t("default")],2)},_r=[],gr={props:{text:{type:String,required:!0},variant:{type:String,required:!0},size:{type:String,default:"md"}},methods:{copy:function(){var e=document.createElement("textarea");e.classList.add("visually-hidden"),e.value=this.text,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.$emit("copy")}}},yr=gr,wr=Object(l["a"])(yr,xr,_r,!1,null,null,null),Cr=wr.exports;n["a"].config.productionTip=!1;var kr=new bt;n["a"].prototype.$socket=kr,n["a"].component("d-input",kt),n["a"].component("d-btn",jt),n["a"].component("d-loader",Lt),n["a"].component("d-context-menu",dr),n["a"].component("d-context-menu-item",br),n["a"].component("d-copy",Cr);var Er={truncate:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(e){var n=e.substr(0,t);return n.length<e.length&&(n+=r),n}},formatDate:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date(e),n=""+r.getMonth(),a=""+r.getDate(),s=r.getFullYear();return"".concat(t[n]," ").concat(a,", ").concat(s)},formatTime:function(e){return isNaN(e)&&(e=0),new Date(1e3*e).toISOString().substr(11,8)}};for(var Sr in Er)n["a"].filter(Sr,Er[Sr]);kr.on("connect",(function(){window.socket=kr.socket,new n["a"]({store:se({socket:kr}),router:mt,render:function(e){return e(F)}}).$mount("#app")}))},"5b6f":function(e,t,r){"use strict";r("d823")},"5c0b":function(e,t,r){"use strict";r("9c0c")},8128:function(e,t,r){"use strict";r("379d")},"99c2":function(e,t,r){},"9aa7":function(e,t,r){},"9ae6":function(e,t,r){"use strict";r("3112")},"9c0c":function(e,t,r){},ad01:function(e,t,r){},c229:function(e,t,r){"use strict";r("0a85")},c823:function(e,t,r){"use strict";r("0924")},c898:function(e,t,r){},d823:function(e,t,r){},f62c:function(e,t,r){"use strict";r("ad01")}});
//# sourceMappingURL=app.8c81099d.js.map